<div class="container h-100">
  <div class="row h-100">
    <div class="col-lg-8 offset-lg-2 h-100 d-flex flex-column">
      <div class="d-flex p-3 sticky-top">
        <i class="sq-chatgpt"></i>
        <h3 class="ms-3 mb-0">ChatGPT</h3>

        <i class="fas fa-plus mx-3 text-muted align-self-center"></i>

        <img id="logo" src="assets/sinequa-logo-light-lg.png" alt="sinequa logo" width="160px" *ngIf="!isDark()">
        <img id="logo" src="assets/sinequa-logo-dark-lg.png" alt="sinequa logo" width="160px" *ngIf="isDark()">

        <ul class="nav nav-pills ms-auto">
          <li class="nav-item">
            <a class="nav-link" role="button" [ngClass]="{active: settingsView}" (click)="toggleChatSettings()">Settings</a>
          </li>
          <li class="nav-item" *ngIf="loginService.complete && (savedChatView || savedChatService.savedChats.length)">
            <a class="nav-link" role="button" [ngClass]="{active: savedChatView}" (click)="toggleSavedChats()">Saved chats</a>
          </li>
        </ul>

        <div class="btn-group" *ngIf="!settingsView && !savedChatView && showChatActions">
          <button class="ms-2 btn btn-primary" [sqTooltip]="'Reset the chat session'"
            (click)="resetChat()">
            <i class="fas fa-sync"></i>
          </button>
          <button class="btn btn-primary" [sqTooltip]="'Save all the current chat'"
            (click)="saveChat()">
            <i class="fas fa-save"></i>
          </button>
        </div>

        <ul class="navbar-nav ms-3">
          <sq-user-menu [display]="'fullName'"></sq-user-menu>
        </ul>

      </div>

      <sq-chat #sqChat *ngIf="!settingsView && !savedChatView && loginService.complete"
        class="flex-grow-1 mb-3" style="min-height: 0;"
        [config]="chatConfig"
        (data)="showChatActions = $event.length > 4">
      </sq-chat>

      <sq-chat-settings *ngIf="settingsView && loginService.complete"
        class="card shadow-lg rounded-4 mb-3 overflow-auto"
        [config]="chatConfig">
      </sq-chat-settings>

      <sq-saved-chats *ngIf="savedChatView && loginService.complete"
        class="card shadow-lg rounded-4 mb-3 overflow-auto"
        (load)="savedChatView = false">
      </sq-saved-chats>
    </div>

  </div>
</div>
